/* ================== Blog Single ================== */
/* ===== 头部：标题 + 元信息 ===== */
.post-head {
  padding-block: space(4) space(2);
  h1 {
    margin: 0 0 space(1);
    font-size: var(--fs-4);
    line-height: 1.2;
  }
  .meta {
    margin: 0;
    color: var(--muted);
    font-size: var(--fs-1);
  }
}

/* ===== 封面 ===== */
.rounded-xl,
.post-cover { border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); }
.post-cover { display: block; width: 100%; height: auto; }

/* ===== 正文排版 ===== */
.post-body {
  --leading: 1.75;
  --indent: space(3);

  font-size: 1rem;
  line-height: var(--leading);

  /* 基础间距：段落与模块 */
  > * + * { margin-block-start: space(2); }

  h2, h3, h4, h5, h6 {
    margin: space(4) 0 space(1);
    line-height: 1.25;
  }
  h2 { font-size: var(--fs-3); }
  h3 { font-size: var(--fs-2); }
  h4 { font-size: 1.125rem; }

  p { margin: 0; }

  /* 列表 */
  ul, ol { padding-left: var(--indent); margin: 0; }
  li + li { margin-top: space(1); }

  /* 图片 / 图注 */
  img { border-radius: var(--radius); box-shadow: var(--shadow); }
  figure { margin: 0; }
  figcaption {
    margin-top: space(1);
    color: var(--muted);
    font-size: var(--fs-1);
    text-align: center;
  }

  /* 引用 */
  blockquote {
    margin: 0; padding: space(2) space(3);
    border-left: calc(var(--border-w) * 3) solid var(--brand);
    background: color-mix(in oklch, var(--surface), white 6%);
    border-radius: var(--radius);
  }

  /* 代码：行内与多行 */
  code { 
    font-family: var(--font-mono);
    background: color-mix(in oklch, var(--surface), black 6%);
    border: var(--border-w) solid var(--border);
    border-radius: calc(var(--radius) / 2);
    padding: .15em .35em;
  }
  pre {
    margin: 0; padding: space(2);
    background: var(--card);
    color: var(--on-card);
    border: var(--border-w) solid var(--border);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: auto;
    font-family: var(--font-mono);
    line-height: 1.6;
  }
  pre code { background: transparent; border: 0; padding: 0; }

  /* 表格 */
  table {
    width: 100%;
    border-collapse: collapse;
    background: var(--surface);
    border: var(--border-w) solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
  }
  th, td { padding: space(1.5) space(2); text-align: left; }
  thead th { background: color-mix(in oklch, var(--surface), white 6%); }
  tbody tr + tr { border-top: var(--border-w) solid var(--border); }

  /* 分隔线 */
  hr {
    border: 0; height: var(--border-w);
    background: var(--border);
    margin: space(4) 0;
  }

  /* 链接（正文内）：主色，悬停下划线 */
  a { color: var(--brand); text-decoration: none; }
  a:hover { text-decoration: underline; }
}

/* ===== 标签 ===== */
.post-tags {
  display: flex; flex-wrap: wrap; gap: space(1);
  align-items: center;
  margin-top: space(3);
  color: var(--muted);
  .tag {
    display: inline-flex; align-items: center;
    padding: calc(var(--space)*0.75) calc(var(--space)*1.25);
    border: var(--border-w) solid var(--border);
    border-radius: var(--radius-pill);
    background: transparent;
    color: var(--on-surface);
    text-decoration: none;
  }
  .tag:hover { background: color-mix(in oklch, var(--surface), white 6%); }
}

/* ===== 分享按钮 ===== */
.post-share {
  display: flex; flex-wrap: wrap; gap: space(1);
  align-items: center; margin-top: space(2);
  span { color: var(--muted); }
  .btn { @extend .button; }
  .btn.btn-sm {
    padding: calc(var(--space)*1.25) calc(var(--space)*2);
    min-block-size: 36px;
  }
}

/* ===== 上一/下一篇 ===== */
.post-pager {
  display: flex; justify-content: space-between; align-items: center;
  gap: space(2); margin-top: space(4); padding-top: space(2);
  border-top: var(--border-w) solid var(--border);
  a, span {
    color: var(--brand); text-decoration: none;
    white-space: nowrap;
  }
  .disabled { color: var(--muted); cursor: default; }
}

/* ===== 相关文章 ===== */
.post-related {
  margin-top: space(6);
  h2 { margin: 0 0 space(2); font-size: var(--fs-2); }
}
.blog-grid {
  display: grid; gap: space(2);
  grid-template-columns: 1fr;
  @include mq-up(md){ grid-template-columns: repeat(3, minmax(0,1fr)); }
}

/* 卡片（复用列表样式的“等高”简版） */
.blog-card.eq {
  display: flex; flex-direction: column;
  background: var(--card); color: var(--on-card);
  border: var(--border-w) solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow); overflow: hidden;
}
.blog-card.eq .media, .blog-card.eq .ph-media,
.blog-card.eq img, .blog-card.eq picture { display: block; width: 100%; aspect-ratio: 16/10; object-fit: cover; }
.blog-card.eq .card-body { padding: space(2); }
.blog-card.eq .card-body h3 { margin: 0 0 space(1); font-size: 1.1rem; line-height: 1.35; }
.blog-card.eq .card-body .meta { margin: 0; color: var(--muted); font-size: var(--fs-1); }
.blog-card.eq .card-actions { padding: 0 space(2) space(2); margin-top: auto; }
.blog-card.eq .btn.btn-secondary {
  @extend .button;
  background: var(--surface);
  color: var(--on-surface);
}

/* ===== 小工具：多行省略（若项目全局已存在，可删） ===== */
.clamp1, .clamp2, .clamp3 { display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; }
.clamp1 { -webkit-line-clamp: 1; }
.clamp2 { -webkit-line-clamp: 2; }
.clamp3 { -webkit-line-clamp: 3; }

/* ===== 焦点可达 ===== */
.post a:focus-visible,
.post .btn:focus-visible { @include focus-ring(3px); }
